select
E.COST_UNIT_CODE,
APPL.USER_ID,
APPL.USER_NAME,
EXP.ABROAD_START_DATE,
EXP.ABROAD_END_DATE,
EXP.DAYTIME_NO,
EXP.TRAFFIC_TOTAL_EXP,
EXP.HOTEL_TOTAL_EXP,
EXP.MISC_TOTAL_EXP,
EXP.DAILY_SPEND_TOTAL_AMT,
EXP.ABROD_TOTAL_AMT,
S.SUBPOENA_DATE
from TBEXP_OVSA_TRVL_LRN_EXP exp
inner join TBEXP_EXPAPPL_C c on c.id=exp.TBEXP_EXPAPPL_C_ID
inner join tbexp_entry e on e.tbexp_entry_group_id=c.tbexp_entry_group_id
inner join TBEXP_SUBPOENA s on s.id=c.TBEXP_SUBPOENA_ID
INNER JOIN TBEXP_APPL_INFO APPL ON APPL.ID=C.TBEXP_APPL_INFO_ID
INNER JOIN TBEXP_BIZ_MATTER BIZ ON BIZ.ID=exp.TBEXP_BIZ_MATTER_ID
INNER JOIN TBEXP_ENTRY_TYPE TYPE ON TYPE.ID=e.TBEXP_ENTRY_TYPE_ID
WHERE
TO_CHAR(s.SUBPOENA_DATE,'YYYYMMDD') BETWEEN TO_CHAR('20160101')  AND TO_CHAR('20171212')
AND(e.COST_UNIT_CODE='ALL' OR 'ALL'='ALL')
OR (APPL.USER_ID='ALL' OR 'ALL'='ALL')
AND (BIZ.CODE='ALL' OR 'ALL'='ALL')
AND TYPE.ENTRY_VALUE='C'